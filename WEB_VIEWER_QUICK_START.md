# 🌐 Gazebo Web查看器 - 快速使用指南

## ✅ 问题已解决！

您遇到的启动错误已经修复。现在可以正常使用Web查看器了。

## 🚀 快速启动

### 方法1：使用启动脚本（推荐）
```bash
cd /home/jetson/aichess
./start_web_viewer.sh
```

### 方法2：直接运行
```bash
cd /home/jetson/aichess
source install/setup.bash
python3 web_viewer/gazebo_web_server_fixed.py
```

## 🌍 访问地址

启动成功后，请在浏览器中访问：

- **主要地址**: http://192.168.8.88:8080
- **备用地址**: http://10.0.0.119:8080
- **本地地址**: http://localhost:8080

## 📱 支持的设备

- ✅ Windows/Mac/Linux 桌面浏览器
- ✅ Android/iOS 手机浏览器
- ✅ iPad/平板电脑
- ✅ 其他局域网设备

## 🎯 主要功能

### 1. 实时视频流
- 显示仿真环境或相机画面
- 30fps流畅传输
- 自动适配屏幕尺寸

### 2. 仿真控制
- 🟢 **启动仿真** - 启动Gazebo仿真环境
- 🔴 **停止仿真** - 关闭仿真进程
- 🔄 **重置仿真** - 重置仿真状态

### 3. 系统监控
- 实时FPS显示
- 连接状态监控
- 系统运行模式显示

### 4. 调试工具
- 📷 截图保存功能
- 📊 性能指标显示
- 📝 实时日志查看

## 🔧 故障排除

### Q: 启动脚本报错
**A**: 已修复！现在使用 `gazebo_web_server_fixed.py`，支持自动回退到仿真模式。

### Q: 网页无法访问
**A**: 检查以下步骤：
1. 确认服务器已启动：`netstat -tuln | grep 8080`
2. 检查防火墙设置
3. 尝试不同的IP地址

### Q: 没有视频显示
**A**: 系统会自动判断：
- 如果有ROS2相机数据 → 显示真实画面
- 如果没有数据 → 显示测试图案

### Q: 仿真控制无响应
**A**:
1. 确保已构建chess_simulation包：`colcon build`
2. 检查Gazebo是否正确安装
3. 查看控制台错误信息

## 📊 系统模式

### ROS2模式
- 连接到真实的ROS2系统
- 显示相机话题数据
- 完整的仿真控制功能

### 仿真模式
- 当ROS2不可用时自动启用
- 显示动态测试图案
- 基础Web界面功能

## 🎮 操作说明

### 基本操作
1. 启动Web服务器
2. 在浏览器中访问指定地址
3. 查看实时视频流
4. 使用右侧控制面板操作

### 全屏查看
- 点击视频右上角的全屏按钮
- 或按F11键进入全屏模式
- 按Esc键退出全屏

### 截图保存
- 点击控制面板中的"截图保存"按钮
- 图片会自动下载到本地

## 🛠️ 技术特性

- **智能回退**: ROS2不可用时自动切换到仿真模式
- **错误处理**: 完善的异常处理和恢复机制
- **性能优化**: 30fps视频流，低延迟传输
- **安全设计**: 防止常见的Web安全问题

## 📞 获取帮助

如果仍有问题，请检查：
1. 控制台输出的错误信息
2. 浏览器开发者工具的Network标签
3. 系统防火墙和网络设置

---

**版本**: 修复版 v1.1
**更新**: 2025-09-21
**状态**: ✅ 已解决启动问题